{% load static %}
	
	<!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Humberger Begin -->
    <div class="humberger__menu__overlay"></div>
    <div class="humberger__menu__wrapper">
        <div class="humberger__menu__logo">
            <a href="#"><img src="img/logo.png" alt=""></a>
        </div>
        <div class="humberger__menu__cart">
            <ul>
                <li><a href="#"><i class="fa fa-heart"></i> <span>1</span></a></li>
                <li><a href="#"><i class="fa fa-shopping-bag"></i> <span>3</span></a></li>
            </ul>
            <div class="header__cart__price">item: <span>$150.00</span></div>
        </div>
        <div class="humberger__menu__widget">
            <div class="header__top__right__language">
                <img src="img/language.png" alt="">
                <div>English</div>
                <span class="arrow_carrot-down"></span>
                <ul>
                    <li><a href="#">Spanis</a></li>
                    <li><a href="#">English</a></li>
                </ul>
            </div>
            <div class="header__top__right__auth">
                <a href="#"><i class="fa fa-user"></i> Login</a>
            </div>
        </div>
        <nav class="humberger__menu__nav mobile-menu">
            <ul>
                <li class="active"><a href="./index.html">Home</a></li>
                <li><a href="./shop-grid.html">Shop</a></li>
                <li><a href="#">Pages</a>
                    <ul class="header__menu__dropdown">
                        <li><a href="./shop-details.html">Shop Details</a></li>
                        <li><a href="./shoping-cart.html">Shoping Cart</a></li>
                        <li><a href="./checkout.html">Check Out</a></li>
                        <li><a href="./blog-details.html">Blog Details</a></li>
                    </ul>
                </li>
                <li><a href="./blog.html">Blog</a></li>
                <li><a href="./contact.html">Contact</a></li>
            </ul>
        </nav>
        <div id="mobile-menu-wrap"></div>
        <div class="header__top__right__social">
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-linkedin"></i></a>
            <a href="#"><i class="fa fa-pinterest-p"></i></a>
        </div>
        <div class="humberger__menu__contact">
            <ul>
                <li><i class="fa fa-envelope"></i> hello@colorlib.com</li>
                <li>Free Shipping for all Order of $99</li>
            </ul>
        </div>
    </div>
    <!-- Humberger End -->

    <!-- Header Section Begin -->
    <header class="header" id="myHeader" style=" position: static; top: 0; width: 100%; background-color: #fff; z-index: 999; transition: all 1.5s ease;">
        <div class="header__top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="header__top__left">
                          <ul>
                            <li><i class="fa fa-envelope"></i> orzoi@gmail.com</li>
                                <li>
                                <div style="position: relative;">
                                    <a href="#" id="locationLink">
                                    <input type="text" value="" name="location" id="location" style="border-radius: 20px; padding: 10px 35px 10px 10px; width: 250px; border: 1px solid #ccc;  background-repeat: no-repeat; background-position: right center;" placeholder="Get your current location"> 
                                    <i class="fa fa-map-marker" onclick="getLocation()" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);"></i> 
                                    
                                    <input type="hidden" name="lat" value="" id="id_latitude">
                                    <input type="hidden" name="lng" value="" id="id_longitude">
                                    </a>
                                </div>
                                </li>
                          </ul>
                        </div>
                      </div>
                      
                      <div class="col-lg-6 col-md-6">
                        <div class="header__top__right">
                            <div class="header__top__right__auth">
								{% if user.is_authenticated %}
									<a href="{% url 'myAccount' %}" style="display: inline-block; margin-right: 10px;"><i class="fa fa-user"></i>My Account</a>
                                	<a href="{% url 'logout' %}" style="display: inline-block;"><i class="fa fa-user-plus"></i>Logout</a> 
								{% else %}
                                	<a href="{% url 'login' %}" style="display: inline-block; margin-right: 10px;"><i class="fa fa-user"></i> Login</a>
                                	<a href="{% url 'registerUser' %}" style="display: inline-block; margin-right: 10px;"><i class="fa fa-user-plus"></i> Register</a> 
                                    <a href="{% url 'registerRestaurant' %}" style="display: inline-block;"><i class="fa fa-user-plus"></i> Register Restaurant</a> 
								{% endif %}
                            </div>
                        </div>
                    </div>
                    
                    </div>
                    
                    </div>
                    
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="header__logo">
                            <a href="{% url 'home' %}"><img src="{% static 'img/logo2.png' %}" alt=""></a>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <nav class="header__menu">
                            <ul>
                                <li class="active"><a href="{% url 'home' %}">Home</a></li>
                                <li ><a href="{% url 'marketplace' %}">Restaurants</a></li>
                                <!-- <li><a href="#">Dropdown</a>
                                    <ul class="header__menu__dropdown">
                                        <li><a href="./shop-details.html">Shop Details</a></li>
                                        <li><a href="./shoping-cart.html">Shoping Cart</a></li>
                                        <li><a href="./checkout.html">Check Out</a></li>
                                        <li><a href="./blog-details.html">Blog Details</a></li>
                                    </ul>
                                </li> -->
                                <li ><a href="{% url 'contact' %}">Contact</a></li>
                            </ul>
                        </nav>
                    </div>
                    <div class="col-lg-3">
                        <div class="header__cart">
                            <ul>
								{% if user.is_authenticated %}
                                	<li><a href="{% url 'cart' %}"><i class="fa fa-shopping-bag"></i> <span id="cart_counter">{{ cart_count }}</span></a></li>
								{% endif %}
                            </ul>
                            
                        </div>
                    </div>
                </div>
                <div class="humberger__open">
                    <i class="fa fa-bars"></i>
                </div>
            </div>
        </div>
        <script>
            window.addEventListener("scroll", function() {
                if (window.scrollY > 300) {
                    document.getElementById("myHeader").style.position = "fixed";
                } else {
                    document.getElementById("myHeader").style.position = "static";
                }
            });
        </script>
    </header>

	<script>
		var x = document.getElementById("location");
		var current_location =  sessionStorage.getItem("current_location")
		if (current_location != ""){
			x.value = current_location;
		}
		
		function getLocation() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(showPosition);
		} else { 
			x.innerHTML = "Geolocation is not supported by this browser.";
		  }
		}
		
		function showPosition(position) {
			var lat = position.coords.latitude
			var lng = position.coords.longitude
            document.getElementById("id_latitude").value = lat 
            document.getElementById("id_longitude").value = lng

			x.value = lat +', '+lng
			//console.log(position);
			//x.innerHTML = "Latitude: " + position.coords.latitude +
			//"<br>Longitude: " + position.coords.longitude;
	
			//hit ajax request to googlemaps api endpoint and get the location data using those lat and lng
					
			var GOOGLE_API_KEY = "{{ GOOGLE_API_KEY }}"
			var url = "https://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lng+"+&key="+GOOGLE_API_KEY
			console.log(url);
			$.ajax ({
				url: url,
				type: "GET",
				success: function(response) {
					//console.log(response);
				   //console.log(current_location);
				   var current_location = response.results[0].formatted_address
					x.value = current_location
					sessionStorage.setItem("current_location", current_location)
					window.location = '?lat='+lat+'&lng='+lng
				}
			})
		}
		</script>
	