{% load static %}
	
	<!--Main Wrapper-->
	
	<div class="wrapper">
	
		<!-- Header Start -->
		
		<header id="header" class="sticky-header header-full-width transparent-header fancy">
			<div class="main-header">
				<div class="wide">
					<div class="nav-left wow fadeOutLeft" data-wow-duration="2s">
						<div class="main-nav">
							<nav id="site-navigation" class="main-navigation">
								<ul class="fancy-left-menu">
									
									<li><a href="listings.html">Carrer</a>
									</li>
									
									<li id="menu-item-15871" >
										<a href="{% url 'marketplace' %}" class="get-start-btn">Marketplace</a>
										<!--End Sub Menu -->
									</li>
								</ul>
							</nav>
							
							<!-- .main-navigation -->
						</div>
					</div>
					<div class="logo">
						<figure>
							<a href="{% url 'home' %}" class="light-logo">
								<img src="{% static 'extra-images/giphy2-unscreen.gif' %}" style="width:120px;height:120px;margin-top:60px;" alt="FoodOnline">
							</a>
							
						</figure>
					</div>
					<div class="nav-right wow fadeOutRight" data-wow-duration="2s">
						<div class="main-nav">
							<nav class="main-navigation">
								<ul class="fancy-right-menu">
									<li><a href="#">Contact us</a>
									</li>
								</ul>
							</nav>
							
							<!-- .main-navigation -->
						</div>					
						<div class="login-option">
							{% if user.is_authenticated %}
								<a href="{% url 'cart' %}">
									<i class="fa fa-shopping-cart text-danger" style="font-size: 18px;"></i>
									<span class="badge badge-warning" id="cart_counter" style="border-radius: 50px; position:relative; bottom:8px; left:-3px;">{{ cart_count }}</span>
								</a>
							{% endif %}
							{% if user.is_authenticated %}
							<a class="cs-color cs-popup-joinus-btn login-popup" href="{% url 'myAccount' %}">My account</a>
							<a class="cs-color cs-popup-joinus-btn login-popup text-danger" href="{% url 'logout' %}">Logout</a>

							{% else %}
							<a class="cs-color cs-popup-joinus-btn login-popup" href="{% url 'login' %}">Login</a>/
								<span><a href="{% url 'registerUser' %}" class="cs-color cs-popup-joinus-btn login-popup ml-0">Register</a></span>
								<a class="get-start-btn" href="{% url 'registerRestaurant'%}"> Register Restaurant </a>
							{% endif %}
						</div>

					</div>
				</div>
			</div>
		</header>
		<!-- Header End -->
		<script>
			var x = document.getElementById("id_address");
			var current_location =  sessionStorage.getItem("current_location")
			if (current_location != ""){
				x.value = current_location;
			}

			function getLocation() {
			//alert('test')
			//return false;
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(showPosition);
			} else { 
				x.innerHTML = "Geolocation is not supported by this browser.";
			  }
			}
			
			function showPosition(position) {
				//console.log(position);
				//var lat = position.coords.latitude
				//var lng = position.coords.longitude

				var lat = '28.2299257'
				var lng = '83.7914607'

				//hit ajax request to googlemaps api endpoint and get the location data using those lat and lng
				
				var GOOGLE_API_KEY = "{{ GOOGLE_API_KEY }}"
				var url = "https://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lng+"+&key="+GOOGLE_API_KEY
				console.log(url);

				$.ajax ({
					url: url,
					type: "GET",
					success: function(response) {
						//console.log(response);
					   var current_location  = response.results[0].formatted_address
					   //console.log(location);
					   x.value = current_location 
					   sessionStorage.setItem("current_location",current_location)
					   window.location = '?lat='+lat+'&lng='+lng
					}
				})
			}
			</script>